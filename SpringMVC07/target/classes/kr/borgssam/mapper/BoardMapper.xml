<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="kr.borgssam.mapper.BoardMapper">
<select id="getList" resultType="kr.borgssam.entity.Board">
	select * from tbl_board order by board_group desc
</select>

<insert id="insert" parameterType="kr.borgssam.entity.Board">
    INSERT INTO com.tbl_board (
        idx, memID, title, content, writer, 
        board_group, board_sequence, board_level, board_available
    )
    SELECT 
		IFNULL(MAX(idx) + 1, 1),#{memID},#{title},#{content},#{writer},
		IFNULL(MAX(board_group) + 1, 0),0,0,1
    FROM com.tbl_board
</insert>

<insert id="insertSelectKey" parameterType="kr.borgssam.entity.Board">
	<selectKey keyProperty="idx,board_group" resultType="kr.borgssam.entity.Board" order="BEFORE">
		select IFNULL(MAX(idx) + 1, 1) as idx, IFNULL(MAX(board_group) + 1, 0) as board_group
		from tbl_board
	</selectKey>

    INSERT INTO tbl_board (
        idx, memID, title, content, writer, 
        board_group, board_sequence, board_level, board_available
    ) values(
		#{idx},#{memId},#{title},#{content},#{writer},
		#{board_group},0,0,1    
    );
</insert>


<select id="login" parameterType="kr.borgssam.entity.Member" resultType="kr.borgssam.entity.Member">
SELECT * from member where memID=#{memId} and memPwd=#{memPwd}
</select>



</mapper>